  <div class="body-unit">
    <div id="tabs-1">
        <h1>User Information</h1>
        <b>ID : </b><%= @user.id %><br>
        <div class="image"><%= image_tag (@user.personal.avatar_url(:thumb)), class: "user-avatar" if @user.personal && @user.personal.avatar %></div>
        <b>email : </b><%= @user.email %><br>
        <b>created at : </b><%= @user.created_at %><br>
        <% if @user.personal && @user.academic %>
          <a href="javascript:window.print()">print</a>
        <% end %>
    </div>
    <div id="tabs-2">
        <% if @user.personal %>
        <table class="personal-view">
          <tr>
              <th colspan="2"><h2>Personal Details</h2></th>
          </tr>
          <tr><td><b>First Name</b></td><td><%= @user.personal.first_name %></td></tr>
          <tr><td><b>Middle Name</b></td><td><%= @user.personal.middle_name %></td></tr>
          <tr><td><b>Last Name</b></td><td><%= @user.personal.last_name %></td></tr>
          <tr><td><b>Date of Birth</b></td><td><%= @user.personal.date_of_birth %></td></tr>
          <tr><td><b>Gender</b></td><td><%= @user.personal.gender %></td></tr>
          <tr><td><b>Category</b></td><td><%= Category.find(@user.personal.category_id).category %></td></tr>
          <tr><td><b>Blood Group</b></td><td><%= @user.personal.blood_group %></td></tr>
          <tr><td><b>Fathers_name</b></td><td><%= @user.personal.fathers_name %></td></tr>
          <tr><td><b>Mothers_name</b></td><td><%= @user.personal.mothers_name %></td></tr>
        </table>
        <% else %>
          <h4>Fill up your personal details</h4>
          <%= form_for @personal, url: user_dashboard_personal_creator_path, method: :post do |f| %>
            <% if @personal.errors.any? %>
              <div id="error_explanation">
                <h2><%= pluralize(@personal.errors.count, "error") %> prohibited this candidate from being saved:</h2>
                <ul>
                <% @personal.errors.full_messages.each do |message| %>
                  <li><%= message %></li>
                <% end %>
                </ul>
              </div>
            <% end %>
    	     <p>
                  <%= f.label :first_name  %><br/>
                  <%= f.text_field :first_name %>
          </p>
    	    <p>
                  <%= f.label :middle_name  %><br/>
                  <%= f.text_field :middle_name %>
          </p>
    	    <p>
                  <%= f.label :last_name  %><br/>
                  <%= f.text_field :last_name %>
          </p>
          <p>
                  <%= f.label :date_of_birth, "Date of Birth" %><br/>
                  <%= f.date_select :date_of_birth, start_year: 1985, end_year: 1999  %>
          </p>
          <p>
                  <%= f.label :gender %><br/>
                  <%= f.select :gender, options_for_select(%w[M F O]) %>
          </p>
          <p>
                  <%= f.label :blood_group %><br/>
                  <%= f.select :blood_group, options_for_select(%w[AB A+ B+ O ]) %>
          </p>
          <p>
                  <%= f.label :fathers_name %><br/>
                  <%= f.text_field :fathers_name %>
          </p>
          <p>
                  <%= f.label :mothers_name  %><br/>
                  <%= f.text_field :mothers_name %>
          </p>
          <p>
                  <%= f.label :category_id %></br>
                  <%= select("personal", "category_id", Category.all.collect {|c| [c.category, c.id]}) %>
          </p>

          <p>
                  <%= f.label :avatar %>
                  <%= f.file_field :avatar %>
          </p>
          <p><%= f.submit "Submit", data: {confirm: "Are you sure information once submitted cant be modified ?"} %></p>
          <% end %>
      <% end %>
    </div>
    <div id="tabs-3">
     <% if @user.academic %>
     <table>
       <tr>
         <th colspan="2"><h2>Academic Details</h2></th>
       </tr>
       <tr><td colspan="2"><h4>10th Details </h4></td></tr>
       <tr><td><b>Roll No</b></td><td><%= @user.academic.tenth_roll %></td></tr>
       <tr><td><b>Year of passing</b></td><td><%= @user.academic.tenth_year_pass %></td></tr>
       <tr><td><b>Board</b></td><td><%= @user.academic.tenth_board %></td></tr>
       <tr><td><b>Marks Percentage</b></td><td><%= @user.academic.tenth_marks_percent %></td></tr>
       <tr><td colspan="2"><h4>12th Details </h4></td></tr>
       <tr><td><b>Roll No</b></td><td><%= @user.academic.hs_roll %></td></tr>
       <tr><td><b>Year of passing </b></td><td><%= @user.academic.hs_year_pass %></td></tr>
       <tr><td><b>Board </b></td><td><%= @user.academic.hs_board %></td></tr>
       <tr><td><b>Marks Percentage </b></td><td><%= @user.academic.hs_marks_percent %></td></tr>
       <tr><td><b><%= @user.academic.sub1 %></b></td><td><%= @user.academic.sub1_marks %></td></tr>
       <tr><td><b><%= @user.academic.sub2 %></b></td><td><%= @user.academic.sub2_marks %></td></tr>
       <tr><td><b><%= @user.academic.sub3 %></b></td><td><%= @user.academic.sub3_marks %></td></tr>
       <tr><td><b><%= @user.academic.sub4 %></b></td><td><%= @user.academic.sub4_marks %></td></tr>
       <tr><td><b><%= @user.academic.sub5 %></b></td><td><%= @user.academic.sub5_marks %></td></tr>
       <tr><td><b><%= @user.academic.sub6 %></b></td><td><%= @user.academic.sub6_marks %></td></tr>
       <tr><td><b><%= @user.academic.sub7 %></b></td><td><%= @user.academic.sub7_marks %></td></tr>
       <tr><td><b><%= @user.academic.sub8 %></b></td><td><%= @user.academic.sub8_marks %></td></tr>
       <tr><td><b><%= @user.academic.sub9 %></b></td><td><%= @user.academic.sub9_marks %></td></tr>
       <tr><td><b><%= @user.academic.sub10 %></b></td><td><%= @user.academic.sub10_marks %><br></td></tr>
     </table>
     <% else %>
       <% begin %>
       <h4>Fill up your academic details</h4>
       <%= form_for @academic, url: user_dashboard_academic_creator_path, method: :post do |f| %>
        <% if @user.errors.any? %>
           <div id="error_explanation">
             <h2><%= pluralize(@user.errors.count, "error") %> prohibited this candidate from being saved:</h2>
             <ul>
             <% @user.errors.full_messages.each do |message| %>
               <li><%= message %></li>
             <% end %>
             </ul>
           </div>
          <% end %>
          <p>
                  <%= f.label :tenth_roll %><br>
                  <%= f.number_field :tenth_roll %>
          </p>
          <p>
                  <%= f.label :tenth_board  %><br/>
                  <%= f.text_field :tenth_board %>
          </p>
          <p>
                  <%= f.label :tenth_year_pass %><br/>
                  <%= f.text_field :tenth_year_pass %>
          </p>
          <p>
                  <%= f.label :tenth_marks_percent  %><br/>
                  <%= f.number_field :tenth_marks_percent %>
          </p>
          <p>
                  <%= f.label :hs_roll %><br>
                  <%= f.number_field :hs_roll %>
          </p>
          <p>
                  <%= f.label :hs_board  %><br/>
                  <%= f.text_field :hs_board %>
          </p>
          <p>
                  <%= f.label :hs_year_pass %><br/>
                  <%= f.text_field :hs_year_pass %>
          </p>
          <p>
                  <%= f.label :hs_marks_percent  %><br/>
                  <%= f.number_field :hs_marks_percent %>
          </p>
          <p>
                  <%= f.label "Stream" %>
                  <%= select("academic", "subject_streams_id", SubjectStream.all.collect {|c| [c.subject_stream, c.id]}) %>

          </p>
          <p> Subject 1 - 8 compulsory </p>
          <p>
                  <%= f.label "Subject 1"   %><br>
                  <%= f.text_field :sub1 , class: "sub-input" %><br>
                  <%= f.label "Subject 1 Marks"   %><br>
                  <%= f.number_field :sub1_marks , class: "sub-input" %><br>
          </p>
          <p>
                  <%= f.label "Subject 2"   %><br>
                  <%= f.text_field :sub2 , class: "sub-input" %><br>
                  <%= f.label "Subject 2 Marks"   %><br>
                  <%= f.number_field :sub2_marks , class: "sub-input" %><br>
          </p>
          <p>
                  <%= f.label "Subject 3"   %><br>
                  <%= f.text_field :sub3 , class: "sub-input" %><br>
                  <%= f.label "Subject 3 Marks"   %><br>
                  <%= f.number_field :sub3_marks , class: "sub-input" %><br>
          </p>
          <p>
                  <%= f.label "Subject 4"   %><br>
                  <%= f.text_field :sub4 , class: "sub-input" %><br>
                  <%= f.label "Subject 4 Marks"   %><br>
                  <%= f.number_field :sub4_marks , class: "sub-input" %><br>
          </p>
          <p>
                  <%= f.label "Subject 5"   %><br>
                  <%= f.text_field :sub5 , class: "sub-input" %><br>
                  <%= f.label "Subject 5 Marks"   %><br>
                  <%= f.number_field :sub5_marks , class: "sub-input" %><br>
          </p>
          <p>
                  <%= f.label "Subject 6"   %><br>
                  <%= f.text_field :sub6 , class: "sub-input" %><br>
                  <%= f.label "Subject 6 Marks"   %><br>
                  <%= f.number_field :sub6_marks , class: "sub-input" %><br>
          </p>
          <p>
                  <%= f.label "Subject 7"   %><br>
                  <%= f.text_field :sub7 , class: "sub-input" %><br>
                  <%= f.label "Subject 7 Marks"   %><br>
                  <%= f.number_field :sub7_marks , class: "sub-input" %><br>
          </p>
          <p>
                  <%= f.label "Subject 8"   %><br>
                  <%= f.text_field :sub8 , class: "sub-input" %><br>
                  <%= f.label "Subject 8 Marks"   %><br>
                  <%= f.number_field :sub8_marks , class: "sub-input" %><br>
          </p>
          <p>
                  <%= f.label "Subject 9"   %><br>
                  <%= f.text_field :sub9 , class: "sub-input" %><br>
                  <%= f.label "Subject 9 Marks"   %><br>
                  <%= f.number_field :sub9_marks , class: "sub-input" %><br>
          </p>
          <p>
                  <%= f.label "Subject 10"   %><br>
                  <%= f.text_field :sub10 , class: "sub-input" %><br>
                  <%= f.label "Subject 10 Marks"   %><br>
                  <%= f.number_field :sub10_marks , class: "sub-input" %><br>
          </p>

          <p><%= f.submit "Submit", data: {confirm: "Are you sure information once submitted cant be modified ?"} %></p>
        <% end %>
          <% rescue => e %>
            <%= "Error #{e}" %>
          <% end %>
      <% end %>
    </div>
    <div id="tabs-4">
      <% begin %>
        <!-- This portion needs to be refactored since violation of mvc -->
        <% if @user.application %>
          <h4>Application no <%= @user.application.id %> <%= Stream.find(@user.application.stream_id).stream %></h4>
        <% else %>
          <h4>Click on the subject you like opt</h4>
           <% @streams.where(subject_stream_id: @user.academic.subject_streams_id).each do |s| %>
             <% if @user.academic &&  @user.personal &&
              @user.academic.hs_marks_percent >= Cutoff.find_by(category_id: @user.personal.category_id, stream_id: s.id).cutoff_marks %>
               <%= form_for([@user, Application.new]) do |f| %>
                 <%= f.hidden_field :user_id, :value => @user.id %>
                 <%= f.hidden_field :stream_id, :value => s.id %>
                 <%= f.submit s.stream , data: {confirm: "Are you sure application once submitted cant be modified ?"}%>
              <% end%>
             <% end %>
           <% end %>
        <% end %>
        <% if Rank.exists? %>
          <p>Results declared <%= link_to "results", streams_path %></p>
        <% end %>
        <% rescue => e %>
          <% "Error occured #{e}" %>
        <% end %>
      </div>
  </div>
